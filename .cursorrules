# SHIZLIST APP DEVELOPMENT PROJECT BRIEF

## CRITICAL RULES

**⚠️ GIT OPERATIONS: NEVER push changes to git without explicit user approval. Always stage and commit, then ASK before pushing.**

**⚠️ DIALOGS: Always use `AppDialog.show()` from `widgets/app_dialog.dart` for confirmation dialogs. Never use raw `AlertDialog`.**

---

## I. Project Metadata & Goals

| Field | Detail |
|-------|--------|
| Project Name | ShizList |
| Slogan/Tagline | "Share the stuff you love" |
| Target Platforms | iOS & Android (Flutter Codebase) |
| Tech Stack | Frontend: Flutter (Dart). Backend/DB: Supabase (Postgres, Auth, Realtime, Storage). |
| Primary Goal | Create a robust wish list app enabling multi-user list creation, anonymous claiming, group messaging, and Amazon affiliate revenue generation. |
| Revenue Model | Amazon Affiliate links generated via the Product Advertising API (PA-API). |

---

## II. Design System & Global Constraints

### A. Typography (Readability Focus)
- Headline/Display: **Montserrat** (Bold 700 / Black 900)
- Body/UI Text: **Source Sans Pro** (Regular 400 / Semi-Bold 600)

### B. Color Palette
- Primary Accent (ShizList Teal): #009688
- Background (Clean White): #FAFAFA
- Text/Surface (Deep Charcoal): #212121
- Error/Alert (Claim Red): #D32F2F
- Accent (Orange/Red): #FF5722

### C. Navigation Structure
- Top Bar: Title, Search/My list Icon, User Profile Picture (Taps to open Drawer).
- Bottom Tab Bar (5 Tabs): My Lists, **Invite**, Contacts, Messages, Share.
- Floating Action Button (FAB): Opens the "Add Item" Modal.
- Side Drawer Menu: Contains Profile, Settings, and Log Out options.

---

## III. Minimum Viable Product (MVP) Feature Set

### A. User & List Management
- Authentication: Email/Password via Supabase Auth.
- Lists: Users can create **multiple lists**.
- Categories: **Stuff, Events, Trips, Crafted, Meals, Other.**

### B. Item Creation & Data
- Add Item Entry Points: **1. Quick Add**, **2. Search on Amazon** (via PA-API), **3. Paste Product Link**.
- Amazon Integration: **MUST** use PA-API to search, retrieve data, and generate the **affiliate link** (retailer_url).
- Images (Optional): **MUST** enforce the generation of two sizes upon upload: **150x150** (thumbnail) and **900x900** (main).

### C. Gifting & Claiming
- Sharing: Generates a unique URL (list.uid). Links can be set to **Private** or **Public**.
- Claiming: Status is **hidden from the List Creator**.
- Claim Expiration: Gifters can add an **optional expires_at date**. Claim is removed upon expiration.

### D. Group Messaging
- Conversations: Simple chat feature tied to a shared list.
- Message Scopes: All Gifters (not Creator), Everyone (inc. Creator), Creator only, Selected Gifters.

---

## IV. Technical Architecture (Supabase & Postgres)

### A. Data Structure Constraints
- ID Strategy: All primary tables **MUST** use both a standard id (BIGINT) and a public-facing uid (UUID).
- Security: **Row Level Security (RLS)** must be enabled and rigorously enforced on all tables.

### B. Essential Supabase Functions & Views
- claims_expire_and_notify (Edge Function/Cron Job): Runs daily to check and remove expired claims.
- public_list_items (Postgres View): Provides a restricted, read-only view for public sharing.
- claim_item (Postgres Function): A single transactional function for safely inserting a claim.

---

## V. Key UI Screens

### 1. Main List View (My Lists)
This is the primary home screen, designed for easy navigation and quick viewing of wish list items.

| UI Element | Description |
|------------|-------------|
| Top Navigation | Contains the list Title, a Search/Filter Icon, and the **User Profile Picture** (avatar) on the right, which opens the Side Drawer. |
| List Content | A vertically scrolling **Stacked Layout** (or List View) showing list items. Each item is a **Card** displaying: Item Image (150x150 thumbnail), Item Name (Montserrat, bold), Price, and a small tag for the **Category** (Stuff, Events, etc.). |
| Claim Status | Item cards must hide the "Claimed" status from the List Creator. Gifters see a prominent **Teal** badge or text showing CLAIMED if someone else has claimed it. |
| Bottom Tab Bar | Fixed at the bottom with 5 icons: **My Lists, Invite, Contacts, Messages, Share**. The active tab uses the **ShizList Teal** color. |
| Floating Action Button (FAB) | A large circular button in the bottom right corner, using **ShizList Teal**, with a + icon. This is the main entry point for adding items. |

### 2. Add Item Modal (Quick Add)
This screen is a modal launched by the FAB, focusing on the simple manual entry of a new wish list item.

| UI Element | Description |
|------------|-------------|
| Screen Type | A **Modal** (or bottom sheet) that slides up over the main screen, focused on task completion. |
| Input Fields | Simple form fields in a stacked layout for: **Name, Description, Price, Retailer URL** (optional). |
| Category Selection | A dedicated section with the 6 required categories (**Stuff, Events, Trips, etc.**) presented as large, tappable buttons or a dropdown. |
| Action Buttons | A primary "Save Item" button using **ShizList Teal**. Below the form, a secondary option: "Or, Search on Amazon." |
